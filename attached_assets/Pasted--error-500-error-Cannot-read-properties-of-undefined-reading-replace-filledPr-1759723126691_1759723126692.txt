{
  "error": "500: {\"error\":\"Cannot read properties of undefined (reading 'replace')\",\"filledPrompt\":\"Template not available\",\"rawResponse\":\"{\\n  \\\"error\\\": \\\"Cannot read properties of undefined (reading 'replace')\\\",\\n  \\\"stack\\\": \\\"TypeError: Cannot read properties of undefined (reading 'replace')\\\\n    at <anonymous> (/home/runner/workspace/server/routes.ts:180:12)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)\\\\n    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15\\\\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\\\\n    at <anonymous> (/home/runner/workspace/server/index.ts:46:3)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)\\\\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9\\\\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\\\\n    at urlencodedParser (/home/runner/workspace/node_modules/body-parser/lib/types/urlencoded.js:85:7)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)\\\\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9\\\\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\\\\n    at /home/runner/workspace/node_modules/body-parser/lib/read.js:137:5\\\\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\\\\n    at invokeCallback (/home/runner/workspace/node_modules/raw-body/index.js:238:16)\\\\n    at done (/home/runner/workspace/node_modules/raw-body/index.js:227:7)\\\\n    at IncomingMessage.onEnd (/home/runner/workspace/node_modules/raw-body/index.js:287:7)\\\\n    at IncomingMessage.emit (node:events:524:28)\\\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\\\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\\\"\\n}\"}",
  "stack": "Error: 500: {\"error\":\"Cannot read properties of undefined (reading 'replace')\",\"filledPrompt\":\"Template not available\",\"rawResponse\":\"{\\n  \\\"error\\\": \\\"Cannot read properties of undefined (reading 'replace')\\\",\\n  \\\"stack\\\": \\\"TypeError: Cannot read properties of undefined (reading 'replace')\\\\n    at <anonymous> (/home/runner/workspace/server/routes.ts:180:12)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)\\\\n    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15\\\\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\\\\n    at <anonymous> (/home/runner/workspace/server/index.ts:46:3)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)\\\\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9\\\\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\\\\n    at urlencodedParser (/home/runner/workspace/node_modules/body-parser/lib/types/urlencoded.js:85:7)\\\\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\\\\n    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)\\\\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9\\\\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\\\\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\\\\n    at /home/runner/workspace/node_modules/body-parser/lib/read.js:137:5\\\\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\\\\n    at invokeCallback (/home/runner/workspace/node_modules/raw-body/index.js:238:16)\\\\n    at done (/home/runner/workspace/node_modules/raw-body/index.js:227:7)\\\\n    at IncomingMessage.onEnd (/home/runner/workspace/node_modules/raw-body/index.js:287:7)\\\\n    at IncomingMessage.emit (node:events:524:28)\\\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\\\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\\\"\\n}\"}\n    at throwIfResNotOk (https://21a7d7df-494f-4334-bd5c-3ef139e96fc8-00-w2775t0bf9ww.kirk.replit.dev/src/lib/queryClient.ts:5:11)\n    at async apiRequest (https://21a7d7df-494f-4334-bd5c-3ef139e96fc8-00-w2775t0bf9ww.kirk.replit.dev/src/lib/queryClient.ts:15:3)\n    at async generateEntityImage (https://21a7d7df-494f-4334-bd5c-3ef139e96fc8-00-w2775t0bf9ww.kirk.replit.dev/src/lib/image-generation.ts:12:22)\n    at async refreshEntityImage (https://21a7d7df-494f-4334-bd5c-3ef139e96fc8-00-w2775t0bf9ww.kirk.replit.dev/src/pages/home.tsx:262:22)\n    at async handleRefreshImage (https://21a7d7df-494f-4334-bd5c-3ef139e96fc8-00-w2775t0bf9ww.kirk.replit.dev/src/components/character-stats-bar.tsx:38:7)",
  "name": "Error"
}